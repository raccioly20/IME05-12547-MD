{
  "hash": "c285073fbae69f9125f0eecedcdd8bb7",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Seleção de Modelos\"\nauthor: \"Ricardo Accioly\"\ndate: \"2024-10-24\"\nformat:\n html:\n    code-link: true\n    fig-width: 9\n    fig-height: 7\n    fig-dpi: 300\nknitr:\n  opts_chunk: \n    out.width: 90%\n    comment: \"#>\"\nexecute:\n  freeze: auto\n  message: false\n---\n\n::: {.cell}\n\n:::\n\n\n\n\n## Carregando Bibliotecas\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(leaps)\n```\n:::\n\n\n\n\n## Carregando os dados\n\nVendas de casas em Seattle entre 2015 e 2016\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvendas_casa <- readRDS(\"home_sales.rds\")\nhead(vendas_casa)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 6 × 8\n#>   selling_price home_age bedrooms bathrooms sqft_living sqft_lot sqft_basement\n#>           <dbl>    <dbl>    <dbl>     <dbl>       <dbl>    <dbl>         <dbl>\n#> 1        487000       10        4      2.5         2540     5001             0\n#> 2        465000       10        3      2.25        1530     1245           480\n#> 3        411000       18        2      2           1130     1148           330\n#> 4        635000        4        3      2.5         3350     4007           800\n#> 5        380000       24        5      2.5         2130     8428             0\n#> 6        495000       21        3      3.5         1650     1577           550\n#> # ℹ 1 more variable: floors <dbl>\n```\n\n\n:::\n\n```{.r .cell-code}\nvendas_casa <- vendas_casa %>% rename(preco=selling_price,\n                                      idade=home_age,\n                                      quartos=bedrooms,\n                                      banheiros= bathrooms,\n                                      m2_princ=sqft_living,\n                                      m2_tot=sqft_lot,\n                                      m2_porao=sqft_basement,\n                                      andares=floors\n                                      )\nsummary(vendas_casa)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>      preco            idade          quartos        banheiros    \n#>  Min.   :350000   Min.   : 0.00   Min.   :1.000   Min.   :0.750  \n#>  1st Qu.:410000   1st Qu.:12.00   1st Qu.:3.000   1st Qu.:2.438  \n#>  Median :470000   Median :19.00   Median :3.000   Median :2.500  \n#>  Mean   :479085   Mean   :18.53   Mean   :3.338   Mean   :2.473  \n#>  3rd Qu.:541625   3rd Qu.:25.00   3rd Qu.:4.000   3rd Qu.:2.500  \n#>  Max.   :650000   Max.   :49.00   Max.   :8.000   Max.   :5.000  \n#>     m2_princ        m2_tot          m2_porao         andares     \n#>  Min.   : 550   Min.   :   600   Min.   :   0.0   Min.   :1.000  \n#>  1st Qu.:1640   1st Qu.:  3200   1st Qu.:   0.0   1st Qu.:2.000  \n#>  Median :2060   Median :  5508   Median :   0.0   Median :2.000  \n#>  Mean   :2087   Mean   : 11891   Mean   : 129.7   Mean   :1.865  \n#>  3rd Qu.:2500   3rd Qu.:  8644   3rd Qu.: 122.5   3rd Qu.:2.000  \n#>  Max.   :3880   Max.   :415126   Max.   :1660.0   Max.   :2.000\n```\n\n\n:::\n\n```{.r .cell-code}\nvendas_casa <- vendas_casa %>% mutate(preco_m=preco/1000) %>% select(-preco)\n```\n:::\n\n\n\n\n## Análise Exploratória\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(summarytools)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> \n#> Anexando pacote: 'summarytools'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> O seguinte objeto é mascarado por 'package:tibble':\n#> \n#>     view\n```\n\n\n:::\n\n```{.r .cell-code}\ndfSummary(vendas_casa) |> stview(method = \"render\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"container st-container\">\n<h3>Data Frame Summary</h3>\n<h4>vendas_casa</h4>\n<strong>Dimensions</strong>: 1492 x 8\n  <br/><strong>Duplicates</strong>: 0\n<br/>\n<table class=\"table table-striped table-bordered st-table st-table-striped st-table-bordered st-multiline \">\n  <thead>\n    <tr>\n      <th align=\"center\" class=\"st-protect-top-border\"><strong>No</strong></th>\n      <th align=\"center\" class=\"st-protect-top-border\"><strong>Variable</strong></th>\n      <th align=\"center\" class=\"st-protect-top-border\"><strong>Stats / Values</strong></th>\n      <th align=\"center\" class=\"st-protect-top-border\"><strong>Freqs (% of Valid)</strong></th>\n      <th align=\"center\" class=\"st-protect-top-border\"><strong>Graph</strong></th>\n      <th align=\"center\" class=\"st-protect-top-border\"><strong>Valid</strong></th>\n      <th align=\"center\" class=\"st-protect-top-border\"><strong>Missing</strong></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td align=\"center\">1</td>\n      <td align=\"left\">idade\n[numeric]</td>\n      <td align=\"left\" style=\"padding:8;vertical-align:middle\"><table style=\"border-collapse:collapse;border:none;margin:0\"><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">Mean (sd) : 18.5 (9)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">min &le; med &le; max:</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">0 &le; 19 &le; 49</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">IQR (CV) : 13 (0.5)</td></tr></table></td>\n      <td align=\"left\" style=\"vertical-align:middle\">45 distinct values</td>\n      <td align=\"left\" style=\"vertical-align:middle;padding:0;background-color:transparent;\"><img style=\"border:none;background-color:transparent;padding:0;max-width:max-content;\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAJgAAABuBAMAAAApJ8cWAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAPUExURf////3+/aampvDw8P///7GHRIEAAAACdFJOUwAAdpPNOAAAAAFiS0dEAIgFHUgAAAAHdElNRQfoChgREwsCBwXDAAAAjklEQVRo3u3X0QnAIAwAUVdwhXaDuv9upehPIMQYSyl6N8AjqKCmRJGy0VHL/RzYWZ4usM+xto3vYFUpYGBgYGBgYAthjjefHyv9AXfGxMNsFhMKGNivMe3ohzFNWQkzFmscMxQwMDAwMLCGWd+BYcwaEAwMDAxsC0y9V6KYOiCYB5P7MInJAeXndbJEkW4NiXT8SkuKYgAAAABJRU5ErkJggg==\"></td>\n      <td align=\"center\">1492\n(100.0%)</td>\n      <td align=\"center\">0\n(0.0%)</td>\n    </tr>\n    <tr>\n      <td align=\"center\">2</td>\n      <td align=\"left\">quartos\n[numeric]</td>\n      <td align=\"left\" style=\"padding:8;vertical-align:middle\"><table style=\"border-collapse:collapse;border:none;margin:0\"><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">Mean (sd) : 3.3 (0.8)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">min &le; med &le; max:</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">1 &le; 3 &le; 8</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">IQR (CV) : 1 (0.2)</td></tr></table></td>\n      <td align=\"left\" style=\"padding:0;vertical-align:middle\"><table style=\"border-collapse:collapse;border:none;margin:0\"><tr style=\"background-color:transparent\"><td style=\"padding:0 2px 0 7px;margin:0;border:0\" align=\"right\">1</td><td style=\"padding:0 2px;border:0;\" align=\"left\">:</td><td style=\"padding:0 4px 0 6px;margin:0;border:0\" align=\"right\">3</td><td style=\"padding:0;border:0\" align=\"left\">(</td><td style=\"padding:0 2px;margin:0;border:0\" align=\"right\">0.2%</td><td style=\"padding:0 4px 0 0;border:0\" align=\"left\">)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0 2px 0 7px;margin:0;border:0\" align=\"right\">2</td><td style=\"padding:0 2px;border:0;\" align=\"left\">:</td><td style=\"padding:0 4px 0 6px;margin:0;border:0\" align=\"right\">169</td><td style=\"padding:0;border:0\" align=\"left\">(</td><td style=\"padding:0 2px;margin:0;border:0\" align=\"right\">11.3%</td><td style=\"padding:0 4px 0 0;border:0\" align=\"left\">)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0 2px 0 7px;margin:0;border:0\" align=\"right\">3</td><td style=\"padding:0 2px;border:0;\" align=\"left\">:</td><td style=\"padding:0 4px 0 6px;margin:0;border:0\" align=\"right\">753</td><td style=\"padding:0;border:0\" align=\"left\">(</td><td style=\"padding:0 2px;margin:0;border:0\" align=\"right\">50.5%</td><td style=\"padding:0 4px 0 0;border:0\" align=\"left\">)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0 2px 0 7px;margin:0;border:0\" align=\"right\">4</td><td style=\"padding:0 2px;border:0;\" align=\"left\">:</td><td style=\"padding:0 4px 0 6px;margin:0;border:0\" align=\"right\">464</td><td style=\"padding:0;border:0\" align=\"left\">(</td><td style=\"padding:0 2px;margin:0;border:0\" align=\"right\">31.1%</td><td style=\"padding:0 4px 0 0;border:0\" align=\"left\">)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0 2px 0 7px;margin:0;border:0\" align=\"right\">5</td><td style=\"padding:0 2px;border:0;\" align=\"left\">:</td><td style=\"padding:0 4px 0 6px;margin:0;border:0\" align=\"right\">96</td><td style=\"padding:0;border:0\" align=\"left\">(</td><td style=\"padding:0 2px;margin:0;border:0\" align=\"right\">6.4%</td><td style=\"padding:0 4px 0 0;border:0\" align=\"left\">)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0 2px 0 7px;margin:0;border:0\" align=\"right\">6</td><td style=\"padding:0 2px;border:0;\" align=\"left\">:</td><td style=\"padding:0 4px 0 6px;margin:0;border:0\" align=\"right\">5</td><td style=\"padding:0;border:0\" align=\"left\">(</td><td style=\"padding:0 2px;margin:0;border:0\" align=\"right\">0.3%</td><td style=\"padding:0 4px 0 0;border:0\" align=\"left\">)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0 2px 0 7px;margin:0;border:0\" align=\"right\">7</td><td style=\"padding:0 2px;border:0;\" align=\"left\">:</td><td style=\"padding:0 4px 0 6px;margin:0;border:0\" align=\"right\">1</td><td style=\"padding:0;border:0\" align=\"left\">(</td><td style=\"padding:0 2px;margin:0;border:0\" align=\"right\">0.1%</td><td style=\"padding:0 4px 0 0;border:0\" align=\"left\">)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0 2px 0 7px;margin:0;border:0\" align=\"right\">8</td><td style=\"padding:0 2px;border:0;\" align=\"left\">:</td><td style=\"padding:0 4px 0 6px;margin:0;border:0\" align=\"right\">1</td><td style=\"padding:0;border:0\" align=\"left\">(</td><td style=\"padding:0 2px;margin:0;border:0\" align=\"right\">0.1%</td><td style=\"padding:0 4px 0 0;border:0\" align=\"left\">)</td></tr></table></td>\n      <td align=\"left\" style=\"vertical-align:middle;padding:0;background-color:transparent;\"><img style=\"border:none;background-color:transparent;padding:0;max-width:max-content;\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAFgAAADEBAMAAADpH/s/AAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAPUExURf////3+/aampvDw8P///7GHRIEAAAACdFJOUwAAdpPNOAAAAAFiS0dEAIgFHUgAAAAHdElNRQfoChgREwsCBwXDAAAAh0lEQVRo3u3WQQqAIBRFUbfgEqwd2P735iACkdJnWH3p3vEZCf+hc3MWvBIYDDaBJfs8Xo4UvG57EQwGj8JdN+il3tuNasVrVItg8N9x11kZmYIRuxFO8cXTgcHg+2flpWzh9v+oeLoIBoMbuOusms4gDmAw+FMsWaYADAZnWLLsBhgMzvBsJb53mqQs9Q3tAAAAAElFTkSuQmCC\"></td>\n      <td align=\"center\">1492\n(100.0%)</td>\n      <td align=\"center\">0\n(0.0%)</td>\n    </tr>\n    <tr>\n      <td align=\"center\">3</td>\n      <td align=\"left\">banheiros\n[numeric]</td>\n      <td align=\"left\" style=\"padding:8;vertical-align:middle\"><table style=\"border-collapse:collapse;border:none;margin:0\"><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">Mean (sd) : 2.5 (0.4)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">min &le; med &le; max:</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">0.8 &le; 2.5 &le; 5</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">IQR (CV) : 0.1 (0.2)</td></tr></table></td>\n      <td align=\"left\" style=\"vertical-align:middle\">14 distinct values</td>\n      <td align=\"left\" style=\"vertical-align:middle;padding:0;background-color:transparent;\"><img style=\"border:none;background-color:transparent;padding:0;max-width:max-content;\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAJgAAABuBAMAAAApJ8cWAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAPUExURf////3+/aampvDw8P///7GHRIEAAAACdFJOUwAAdpPNOAAAAAFiS0dEAIgFHUgAAAAHdElNRQfoChgREwsCBwXDAAAAfUlEQVRo3u3ZuwmAMBRA0aygGxg3MPvvZmEsFP+JoHBukyqHwIM0LwQ9qdku5rrmUsdYn6ZgMBgMBoPBYDAYDAaDwWAwGAwGg8F+irV5d1IHy8gr2LzlqYLlc4Ddx04GcQ9Lxy+EFWPzuKpgq1sfwOLyAzvDdlbFK6ysoCeNyop1Uszb958AAAAASUVORK5CYII=\"></td>\n      <td align=\"center\">1492\n(100.0%)</td>\n      <td align=\"center\">0\n(0.0%)</td>\n    </tr>\n    <tr>\n      <td align=\"center\">4</td>\n      <td align=\"left\">m2_princ\n[numeric]</td>\n      <td align=\"left\" style=\"padding:8;vertical-align:middle\"><table style=\"border-collapse:collapse;border:none;margin:0\"><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">Mean (sd) : 2087 (576.2)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">min &le; med &le; max:</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">550 &le; 2060 &le; 3880</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">IQR (CV) : 860.2 (0.3)</td></tr></table></td>\n      <td align=\"left\" style=\"vertical-align:middle\">290 distinct values</td>\n      <td align=\"left\" style=\"vertical-align:middle;padding:0;background-color:transparent;\"><img style=\"border:none;background-color:transparent;padding:0;max-width:max-content;\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAJgAAABuBAMAAAApJ8cWAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAPUExURf////3+/aampvDw8P///7GHRIEAAAACdFJOUwAAdpPNOAAAAAFiS0dEAIgFHUgAAAAHdElNRQfoChgREwsCBwXDAAAA0klEQVRo3u3ZbQqEIBAGYK/Q3iC9wc7977ZJSoPM+jEjFfi+EP3yYTIzVOcQTTY5/si+daeOBSJaCIt9Nw077l9gD2HxTZqxz4lQuozYBQFTYh3fZz9G7eqArYs1xtoY1qgO2NpYZayNY5XqbsDiP9NPw1IrYMCAAQM2gP3ZB9BhJK+2gQEDBgzYTEzawlVjQagO2OuwvG6agxUtgAF7GCvnNBNWVrcmxmYMOxbkFndhfAfMjAW2lHoflh+VYfm0ahyjVF3C/HVipcSiwDB7HKLJD8qPYoDJpXLCAAAAAElFTkSuQmCC\"></td>\n      <td align=\"center\">1492\n(100.0%)</td>\n      <td align=\"center\">0\n(0.0%)</td>\n    </tr>\n    <tr>\n      <td align=\"center\">5</td>\n      <td align=\"left\">m2_tot\n[numeric]</td>\n      <td align=\"left\" style=\"padding:8;vertical-align:middle\"><table style=\"border-collapse:collapse;border:none;margin:0\"><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">Mean (sd) : 11891.2 (28195)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">min &le; med &le; max:</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">600 &le; 5508.5 &le; 415126</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">IQR (CV) : 5444.5 (2.4)</td></tr></table></td>\n      <td align=\"left\" style=\"vertical-align:middle\">1310 distinct values</td>\n      <td align=\"left\" style=\"vertical-align:middle;padding:0;background-color:transparent;\"><img style=\"border:none;background-color:transparent;padding:0;max-width:max-content;\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAJgAAABuBAMAAAApJ8cWAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAPUExURf////3+/aampvDw8P///7GHRIEAAAACdFJOUwAAdpPNOAAAAAFiS0dEAIgFHUgAAAAHdElNRQfoChgREwsCBwXDAAAAWElEQVRo3u3ZsRHAIAwEQbVACYYO7P57c2CRM4Aj9hJlO58rQjPV7CorJdaeLxgMBoPBYDAYDAaDwWAwGAwGg8FgMBgMBjsS6x/YLVje+09scHBidUuhmV4bg0yfOwR1OgAAAABJRU5ErkJggg==\"></td>\n      <td align=\"center\">1492\n(100.0%)</td>\n      <td align=\"center\">0\n(0.0%)</td>\n    </tr>\n    <tr>\n      <td align=\"center\">6</td>\n      <td align=\"left\">m2_porao\n[numeric]</td>\n      <td align=\"left\" style=\"padding:8;vertical-align:middle\"><table style=\"border-collapse:collapse;border:none;margin:0\"><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">Mean (sd) : 129.7 (267.8)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">min &le; med &le; max:</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">0 &le; 0 &le; 1660</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">IQR (CV) : 122.5 (2.1)</td></tr></table></td>\n      <td align=\"left\" style=\"vertical-align:middle\">121 distinct values</td>\n      <td align=\"left\" style=\"vertical-align:middle;padding:0;background-color:transparent;\"><img style=\"border:none;background-color:transparent;padding:0;max-width:max-content;\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAJgAAABuBAMAAAApJ8cWAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAPUExURf////3+/aampvDw8P///7GHRIEAAAACdFJOUwAAdpPNOAAAAAFiS0dEAIgFHUgAAAAHdElNRQfoChgREwsCBwXDAAAAdElEQVRo3u3ZwQmAMAxA0a6gG1g3sPvvZgsteBCF1JO8DyG3R+5JSZFybVtm69heSoHBYDAYDAaDwWAwGAwGg8FgMBgMBoPBYD/B1vZO/Ayr+wiDd1ibWawdlAcWuu6C7QMKg0/YAEfbLHaZ8gp3LH9SUqQTTH8jDkckmsUAAAAASUVORK5CYII=\"></td>\n      <td align=\"center\">1492\n(100.0%)</td>\n      <td align=\"center\">0\n(0.0%)</td>\n    </tr>\n    <tr>\n      <td align=\"center\">7</td>\n      <td align=\"left\">andares\n[numeric]</td>\n      <td align=\"left\" style=\"padding:8;vertical-align:middle\"><table style=\"border-collapse:collapse;border:none;margin:0\"><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">Min  : 1</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">Mean : 1.9</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">Max  : 2</td></tr></table></td>\n      <td align=\"left\" style=\"padding:0;vertical-align:middle\"><table style=\"border-collapse:collapse;border:none;margin:0\"><tr style=\"background-color:transparent\"><td style=\"padding:0 2px 0 7px;margin:0;border:0\" align=\"right\">1</td><td style=\"padding:0 2px;border:0;\" align=\"left\">:</td><td style=\"padding:0 4px 0 6px;margin:0;border:0\" align=\"right\">201</td><td style=\"padding:0;border:0\" align=\"left\">(</td><td style=\"padding:0 2px;margin:0;border:0\" align=\"right\">13.5%</td><td style=\"padding:0 4px 0 0;border:0\" align=\"left\">)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0 2px 0 7px;margin:0;border:0\" align=\"right\">2</td><td style=\"padding:0 2px;border:0;\" align=\"left\">:</td><td style=\"padding:0 4px 0 6px;margin:0;border:0\" align=\"right\">1291</td><td style=\"padding:0;border:0\" align=\"left\">(</td><td style=\"padding:0 2px;margin:0;border:0\" align=\"right\">86.5%</td><td style=\"padding:0 4px 0 0;border:0\" align=\"left\">)</td></tr></table></td>\n      <td align=\"left\" style=\"vertical-align:middle;padding:0;background-color:transparent;\"><img style=\"border:none;background-color:transparent;padding:0;max-width:max-content;\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAI4AAAA3BAMAAAAoFm+GAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAPUExURf////3+/aampvDw8P///7GHRIEAAAACdFJOUwAAdpPNOAAAAAFiS0dEAIgFHUgAAAAHdElNRQfoChgREwsCBwXDAAAATElEQVRIx2NgGAWEgBIcKAqSBaDmKBvDwKg5o+aMmjNqzqg5g8kcapXz5Gke/OYoUQow4os8YDRqzqg5o+aMmjNqDk3MoVY5PwpwAwDx1JrpSotwlQAAAABJRU5ErkJggg==\"></td>\n      <td align=\"center\">1492\n(100.0%)</td>\n      <td align=\"center\">0\n(0.0%)</td>\n    </tr>\n    <tr>\n      <td align=\"center\">8</td>\n      <td align=\"left\">preco_m\n[numeric]</td>\n      <td align=\"left\" style=\"padding:8;vertical-align:middle\"><table style=\"border-collapse:collapse;border:none;margin:0\"><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">Mean (sd) : 479.1 (81)</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">min &le; med &le; max:</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">350 &le; 470 &le; 650</td></tr><tr style=\"background-color:transparent\"><td style=\"padding:0;margin:0;border:0\" align=\"left\">IQR (CV) : 131.6 (0.2)</td></tr></table></td>\n      <td align=\"left\" style=\"vertical-align:middle\">545 distinct values</td>\n      <td align=\"left\" style=\"vertical-align:middle;padding:0;background-color:transparent;\"><img style=\"border:none;background-color:transparent;padding:0;max-width:max-content;\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAJgAAABuBAMAAAApJ8cWAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAPUExURf////3+/aampvDw8P///7GHRIEAAAACdFJOUwAAdpPNOAAAAAFiS0dEAIgFHUgAAAAHdElNRQfoChgREwsCBwXDAAAAw0lEQVRo3u3YUQ6EIAxFUbbg7EDYge5/byON1RGtCVgTM96X+NEPTmpAUEMgLenKfOKUvquLiY1TrmLakGC13ZVYmhsSLFV2dzuW7y56YfkafjGZWg9M2xw8MC3AwHwwWeduWDke7L+xeL5L1mHpvEWwl2P2WmvA7O7AnoFt3u+OMT27lqK3sMPxW2wsi+di+233ArZ/UMHAwMDAFmz90+OB5cIF0yPSBdMCDAwMDOy9mHxheGFSgIGBgYHZWHRJIC35AtvhV01MPFc4AAAAAElFTkSuQmCC\"></td>\n      <td align=\"center\">1492\n(100.0%)</td>\n      <td align=\"center\">0\n(0.0%)</td>\n    </tr>\n  </tbody>\n</table>\n<p>Generated by <a href='https://github.com/dcomtois/summarytools'>summarytools</a> 1.0.1 (<a href='https://www.r-project.org/'>R</a> version 4.4.1)<br/>2024-10-24</p>\n</div>\n```\n\n:::\n\n```{.r .cell-code}\nvendas_casa %>% select(where(is.numeric)) %>% \n          summarize(\n            across(\n              everything(),\n              ~ var(., na.rm = TRUE))) %>% \n  pivot_longer(everything(),\n    names_to = \"variavel\", \n    values_to = \"variancia\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 8 × 2\n#>   variavel      variancia\n#>   <chr>             <dbl>\n#> 1 idade            81.1  \n#> 2 quartos           0.633\n#> 3 banheiros         0.171\n#> 4 m2_princ     332045.   \n#> 5 m2_tot    794957702.   \n#> 6 m2_porao      71699.   \n#> 7 andares           0.117\n#> 8 preco_m        6558.\n```\n\n\n:::\n:::\n\n\n\n\n## Conjunto de teste e treino\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(caret)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Carregando pacotes exigidos: lattice\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> \n#> Anexando pacote: 'caret'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> O seguinte objeto é mascarado por 'package:purrr':\n#> \n#>     lift\n```\n\n\n:::\n\n```{.r .cell-code}\nset.seed(21)\nnrow(vendas_casa)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 1492\n```\n\n\n:::\n\n```{.r .cell-code}\ny <- vendas_casa$preco_m\nindice_teste <- createDataPartition(y, times = 1, p = 0.2, list = FALSE)\n\nconj_treino <- vendas_casa[-indice_teste,]\nconj_teste <- vendas_casa[indice_teste,]\n\nstr(conj_treino)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> tibble [1,192 × 8] (S3: tbl_df/tbl/data.frame)\n#>  $ idade    : num [1:1192] 10 18 4 21 19 24 3 16 20 29 ...\n#>  $ quartos  : num [1:1192] 3 2 3 3 3 2 4 3 3 3 ...\n#>  $ banheiros: num [1:1192] 2.25 2 2.5 3.5 2.25 1 2.5 2.75 2.75 2.5 ...\n#>  $ m2_princ : num [1:1192] 1530 1130 3350 1650 1430 1430 2140 2100 2930 1960 ...\n#>  $ m2_tot   : num [1:1192] 1245 1148 4007 1577 4777 ...\n#>  $ m2_porao : num [1:1192] 480 330 800 550 0 420 0 590 1070 0 ...\n#>  $ andares  : num [1:1192] 2 2 2 2 2 1 2 2 1 2 ...\n#>  $ preco_m  : num [1:1192] 465 411 635 495 355 ...\n```\n\n\n:::\n\n```{.r .cell-code}\nstr(conj_teste)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> tibble [300 × 8] (S3: tbl_df/tbl/data.frame)\n#>  $ idade    : num [1:300] 10 24 19 11 3 28 9 17 9 19 ...\n#>  $ quartos  : num [1:300] 4 5 3 4 4 5 3 3 3 3 ...\n#>  $ banheiros: num [1:300] 2.5 2.5 2 2.5 2.75 3 2.5 3.5 3.5 2.25 ...\n#>  $ m2_princ : num [1:300] 2540 2130 2190 1920 2360 ...\n#>  $ m2_tot   : num [1:300] 5001 8428 19800 9000 15100 ...\n#>  $ m2_porao : num [1:300] 0 0 0 0 0 0 0 770 770 145 ...\n#>  $ andares  : num [1:300] 2 2 1 2 1 2 2 2 2 2 ...\n#>  $ preco_m  : num [1:300] 487 380 465 425 535 ...\n```\n\n\n:::\n\n```{.r .cell-code}\ngt::gt(head(conj_treino, 10))\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"ajgaokapiz\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#ajgaokapiz table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#ajgaokapiz thead, #ajgaokapiz tbody, #ajgaokapiz tfoot, #ajgaokapiz tr, #ajgaokapiz td, #ajgaokapiz th {\n  border-style: none;\n}\n\n#ajgaokapiz p {\n  margin: 0;\n  padding: 0;\n}\n\n#ajgaokapiz .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ajgaokapiz .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ajgaokapiz .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ajgaokapiz .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ajgaokapiz .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ajgaokapiz .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ajgaokapiz .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ajgaokapiz .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ajgaokapiz .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ajgaokapiz .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ajgaokapiz .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ajgaokapiz .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ajgaokapiz .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#ajgaokapiz .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ajgaokapiz .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ajgaokapiz .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ajgaokapiz .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ajgaokapiz .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ajgaokapiz .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ajgaokapiz .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ajgaokapiz .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ajgaokapiz .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#ajgaokapiz .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ajgaokapiz .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ajgaokapiz .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ajgaokapiz .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ajgaokapiz .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ajgaokapiz .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ajgaokapiz .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ajgaokapiz .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ajgaokapiz .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ajgaokapiz .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ajgaokapiz .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ajgaokapiz .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ajgaokapiz .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ajgaokapiz .gt_left {\n  text-align: left;\n}\n\n#ajgaokapiz .gt_center {\n  text-align: center;\n}\n\n#ajgaokapiz .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ajgaokapiz .gt_font_normal {\n  font-weight: normal;\n}\n\n#ajgaokapiz .gt_font_bold {\n  font-weight: bold;\n}\n\n#ajgaokapiz .gt_font_italic {\n  font-style: italic;\n}\n\n#ajgaokapiz .gt_super {\n  font-size: 65%;\n}\n\n#ajgaokapiz .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#ajgaokapiz .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ajgaokapiz .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ajgaokapiz .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ajgaokapiz .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ajgaokapiz .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ajgaokapiz .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"idade\">idade</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"quartos\">quartos</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"banheiros\">banheiros</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"m2_princ\">m2_princ</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"m2_tot\">m2_tot</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"m2_porao\">m2_porao</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"andares\">andares</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"preco_m\">preco_m</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"idade\" class=\"gt_row gt_right\">10</td>\n<td headers=\"quartos\" class=\"gt_row gt_right\">3</td>\n<td headers=\"banheiros\" class=\"gt_row gt_right\">2.25</td>\n<td headers=\"m2_princ\" class=\"gt_row gt_right\">1530</td>\n<td headers=\"m2_tot\" class=\"gt_row gt_right\">1245</td>\n<td headers=\"m2_porao\" class=\"gt_row gt_right\">480</td>\n<td headers=\"andares\" class=\"gt_row gt_right\">2</td>\n<td headers=\"preco_m\" class=\"gt_row gt_right\">465.000</td></tr>\n    <tr><td headers=\"idade\" class=\"gt_row gt_right\">18</td>\n<td headers=\"quartos\" class=\"gt_row gt_right\">2</td>\n<td headers=\"banheiros\" class=\"gt_row gt_right\">2.00</td>\n<td headers=\"m2_princ\" class=\"gt_row gt_right\">1130</td>\n<td headers=\"m2_tot\" class=\"gt_row gt_right\">1148</td>\n<td headers=\"m2_porao\" class=\"gt_row gt_right\">330</td>\n<td headers=\"andares\" class=\"gt_row gt_right\">2</td>\n<td headers=\"preco_m\" class=\"gt_row gt_right\">411.000</td></tr>\n    <tr><td headers=\"idade\" class=\"gt_row gt_right\">4</td>\n<td headers=\"quartos\" class=\"gt_row gt_right\">3</td>\n<td headers=\"banheiros\" class=\"gt_row gt_right\">2.50</td>\n<td headers=\"m2_princ\" class=\"gt_row gt_right\">3350</td>\n<td headers=\"m2_tot\" class=\"gt_row gt_right\">4007</td>\n<td headers=\"m2_porao\" class=\"gt_row gt_right\">800</td>\n<td headers=\"andares\" class=\"gt_row gt_right\">2</td>\n<td headers=\"preco_m\" class=\"gt_row gt_right\">635.000</td></tr>\n    <tr><td headers=\"idade\" class=\"gt_row gt_right\">21</td>\n<td headers=\"quartos\" class=\"gt_row gt_right\">3</td>\n<td headers=\"banheiros\" class=\"gt_row gt_right\">3.50</td>\n<td headers=\"m2_princ\" class=\"gt_row gt_right\">1650</td>\n<td headers=\"m2_tot\" class=\"gt_row gt_right\">1577</td>\n<td headers=\"m2_porao\" class=\"gt_row gt_right\">550</td>\n<td headers=\"andares\" class=\"gt_row gt_right\">2</td>\n<td headers=\"preco_m\" class=\"gt_row gt_right\">495.000</td></tr>\n    <tr><td headers=\"idade\" class=\"gt_row gt_right\">19</td>\n<td headers=\"quartos\" class=\"gt_row gt_right\">3</td>\n<td headers=\"banheiros\" class=\"gt_row gt_right\">2.25</td>\n<td headers=\"m2_princ\" class=\"gt_row gt_right\">1430</td>\n<td headers=\"m2_tot\" class=\"gt_row gt_right\">4777</td>\n<td headers=\"m2_porao\" class=\"gt_row gt_right\">0</td>\n<td headers=\"andares\" class=\"gt_row gt_right\">2</td>\n<td headers=\"preco_m\" class=\"gt_row gt_right\">355.000</td></tr>\n    <tr><td headers=\"idade\" class=\"gt_row gt_right\">24</td>\n<td headers=\"quartos\" class=\"gt_row gt_right\">2</td>\n<td headers=\"banheiros\" class=\"gt_row gt_right\">1.00</td>\n<td headers=\"m2_princ\" class=\"gt_row gt_right\">1430</td>\n<td headers=\"m2_tot\" class=\"gt_row gt_right\">365904</td>\n<td headers=\"m2_porao\" class=\"gt_row gt_right\">420</td>\n<td headers=\"andares\" class=\"gt_row gt_right\">1</td>\n<td headers=\"preco_m\" class=\"gt_row gt_right\">356.000</td></tr>\n    <tr><td headers=\"idade\" class=\"gt_row gt_right\">3</td>\n<td headers=\"quartos\" class=\"gt_row gt_right\">4</td>\n<td headers=\"banheiros\" class=\"gt_row gt_right\">2.50</td>\n<td headers=\"m2_princ\" class=\"gt_row gt_right\">2140</td>\n<td headers=\"m2_tot\" class=\"gt_row gt_right\">7245</td>\n<td headers=\"m2_porao\" class=\"gt_row gt_right\">0</td>\n<td headers=\"andares\" class=\"gt_row gt_right\">2</td>\n<td headers=\"preco_m\" class=\"gt_row gt_right\">495.000</td></tr>\n    <tr><td headers=\"idade\" class=\"gt_row gt_right\">16</td>\n<td headers=\"quartos\" class=\"gt_row gt_right\">3</td>\n<td headers=\"banheiros\" class=\"gt_row gt_right\">2.75</td>\n<td headers=\"m2_princ\" class=\"gt_row gt_right\">2100</td>\n<td headers=\"m2_tot\" class=\"gt_row gt_right\">10362</td>\n<td headers=\"m2_porao\" class=\"gt_row gt_right\">590</td>\n<td headers=\"andares\" class=\"gt_row gt_right\">2</td>\n<td headers=\"preco_m\" class=\"gt_row gt_right\">525.000</td></tr>\n    <tr><td headers=\"idade\" class=\"gt_row gt_right\">20</td>\n<td headers=\"quartos\" class=\"gt_row gt_right\">3</td>\n<td headers=\"banheiros\" class=\"gt_row gt_right\">2.75</td>\n<td headers=\"m2_princ\" class=\"gt_row gt_right\">2930</td>\n<td headers=\"m2_tot\" class=\"gt_row gt_right\">5569</td>\n<td headers=\"m2_porao\" class=\"gt_row gt_right\">1070</td>\n<td headers=\"andares\" class=\"gt_row gt_right\">1</td>\n<td headers=\"preco_m\" class=\"gt_row gt_right\">559.900</td></tr>\n    <tr><td headers=\"idade\" class=\"gt_row gt_right\">29</td>\n<td headers=\"quartos\" class=\"gt_row gt_right\">3</td>\n<td headers=\"banheiros\" class=\"gt_row gt_right\">2.50</td>\n<td headers=\"m2_princ\" class=\"gt_row gt_right\">1960</td>\n<td headers=\"m2_tot\" class=\"gt_row gt_right\">8469</td>\n<td headers=\"m2_porao\" class=\"gt_row gt_right\">0</td>\n<td headers=\"andares\" class=\"gt_row gt_right\">2</td>\n<td headers=\"preco_m\" class=\"gt_row gt_right\">552.321</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n## Matriz de correlação\n\n\n\n\n::: {.cell figure.width='8'}\n\n```{.r .cell-code}\nlibrary(corrplot)\nmat_corr <- cor(conj_treino)\ncorrplot(mat_corr)\n```\n\n::: {.cell-output-display}\n![](Aula07.3_files/figure-html/corrplot1-1.png){width=90%}\n:::\n:::\n\n\n\n\n## Matriz de dispersão\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(psych)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> \n#> Anexando pacote: 'psych'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Os seguintes objetos são mascarados por 'package:ggplot2':\n#> \n#>     %+%, alpha\n```\n\n\n:::\n\n```{.r .cell-code}\npairs.panels(conj_treino,\n             method = \"pearson\", # metodo de correlação\n             hist.col = \"#00AFBB\",\n             density = TRUE,  # mostra graficos de densidade\n             ellipses = FALSE # mostra elipses de correlação\n             )\n```\n\n::: {.cell-output-display}\n![](Aula07.3_files/figure-html/splom2-1.png){width=90%}\n:::\n:::\n\n\n\n\n## Métodos de seleção de modelo\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Best Subset sem definir o número máx de subsets a ser avaliado\najusreg.comp <- regsubsets(preco_m ~ ., data=conj_treino)\nsummary(ajusreg.comp)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> Subset selection object\n#> Call: regsubsets.formula(preco_m ~ ., data = conj_treino)\n#> 7 Variables  (and intercept)\n#>           Forced in Forced out\n#> idade         FALSE      FALSE\n#> quartos       FALSE      FALSE\n#> banheiros     FALSE      FALSE\n#> m2_princ      FALSE      FALSE\n#> m2_tot        FALSE      FALSE\n#> m2_porao      FALSE      FALSE\n#> andares       FALSE      FALSE\n#> 1 subsets of each size up to 7\n#> Selection Algorithm: exhaustive\n#>          idade quartos banheiros m2_princ m2_tot m2_porao andares\n#> 1  ( 1 ) \" \"   \" \"     \" \"       \"*\"      \" \"    \" \"      \" \"    \n#> 2  ( 1 ) \" \"   \"*\"     \" \"       \"*\"      \" \"    \" \"      \" \"    \n#> 3  ( 1 ) \" \"   \"*\"     \" \"       \"*\"      \" \"    \" \"      \"*\"    \n#> 4  ( 1 ) \"*\"   \"*\"     \" \"       \"*\"      \" \"    \" \"      \"*\"    \n#> 5  ( 1 ) \"*\"   \"*\"     \"*\"       \"*\"      \" \"    \" \"      \"*\"    \n#> 6  ( 1 ) \"*\"   \"*\"     \"*\"       \"*\"      \"*\"    \" \"      \"*\"    \n#> 7  ( 1 ) \"*\"   \"*\"     \"*\"       \"*\"      \"*\"    \"*\"      \"*\"\n```\n\n\n:::\n:::\n\n\n\n\n## nvmax=13\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\najusreg.comp <- regsubsets(preco_m ~ ., data=conj_treino, nvmax=13)\nsumario.reg <- summary(ajusreg.comp)\nsumario.reg\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> Subset selection object\n#> Call: regsubsets.formula(preco_m ~ ., data = conj_treino, nvmax = 13)\n#> 7 Variables  (and intercept)\n#>           Forced in Forced out\n#> idade         FALSE      FALSE\n#> quartos       FALSE      FALSE\n#> banheiros     FALSE      FALSE\n#> m2_princ      FALSE      FALSE\n#> m2_tot        FALSE      FALSE\n#> m2_porao      FALSE      FALSE\n#> andares       FALSE      FALSE\n#> 1 subsets of each size up to 7\n#> Selection Algorithm: exhaustive\n#>          idade quartos banheiros m2_princ m2_tot m2_porao andares\n#> 1  ( 1 ) \" \"   \" \"     \" \"       \"*\"      \" \"    \" \"      \" \"    \n#> 2  ( 1 ) \" \"   \"*\"     \" \"       \"*\"      \" \"    \" \"      \" \"    \n#> 3  ( 1 ) \" \"   \"*\"     \" \"       \"*\"      \" \"    \" \"      \"*\"    \n#> 4  ( 1 ) \"*\"   \"*\"     \" \"       \"*\"      \" \"    \" \"      \"*\"    \n#> 5  ( 1 ) \"*\"   \"*\"     \"*\"       \"*\"      \" \"    \" \"      \"*\"    \n#> 6  ( 1 ) \"*\"   \"*\"     \"*\"       \"*\"      \"*\"    \" \"      \"*\"    \n#> 7  ( 1 ) \"*\"   \"*\"     \"*\"       \"*\"      \"*\"    \"*\"      \"*\"\n```\n\n\n:::\n\n```{.r .cell-code}\nnames(sumario.reg)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] \"which\"  \"rsq\"    \"rss\"    \"adjr2\"  \"cp\"     \"bic\"    \"outmat\" \"obj\"\n```\n\n\n:::\n:::\n\n\n\n\n## Avaliando os modelos\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Os modelos vão ser escolhidos com base no menor Cp\nplot(sumario.reg$cp,xlab=\"Número de Variáveis\",ylab=\"Cp\")\nwhich.min(sumario.reg$cp)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 6\n```\n\n\n:::\n\n```{.r .cell-code}\npoints(6,sumario.reg$cp[6],pch=20,col=\"red\")\n```\n\n::: {.cell-output-display}\n![](Aula07.3_files/figure-html/avaliando-1.png){width=90%}\n:::\n:::\n\n\n\n\n## Como extrair detalhes do ajuste\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncoef(ajusreg.comp,6)  \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>   (Intercept)         idade       quartos     banheiros      m2_princ \n#>  2.551855e+02 -9.302566e-01 -4.456961e+01  9.461555e+00  1.441541e-01 \n#>        m2_tot       andares \n#>  9.183278e-05  3.486187e+01\n```\n\n\n:::\n:::\n\n\n\n\n## Forward Stepwise (passo a passo à frente)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\najusreg.fwd <- regsubsets(preco_m ~ . , data=conj_treino,nvmax=13, method=\"forward\")\nsumario.reg.fwd <- summary(ajusreg.fwd)\nsumario.reg.fwd \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> Subset selection object\n#> Call: regsubsets.formula(preco_m ~ ., data = conj_treino, nvmax = 13, \n#>     method = \"forward\")\n#> 7 Variables  (and intercept)\n#>           Forced in Forced out\n#> idade         FALSE      FALSE\n#> quartos       FALSE      FALSE\n#> banheiros     FALSE      FALSE\n#> m2_princ      FALSE      FALSE\n#> m2_tot        FALSE      FALSE\n#> m2_porao      FALSE      FALSE\n#> andares       FALSE      FALSE\n#> 1 subsets of each size up to 7\n#> Selection Algorithm: forward\n#>          idade quartos banheiros m2_princ m2_tot m2_porao andares\n#> 1  ( 1 ) \" \"   \" \"     \" \"       \"*\"      \" \"    \" \"      \" \"    \n#> 2  ( 1 ) \" \"   \"*\"     \" \"       \"*\"      \" \"    \" \"      \" \"    \n#> 3  ( 1 ) \" \"   \"*\"     \" \"       \"*\"      \" \"    \" \"      \"*\"    \n#> 4  ( 1 ) \"*\"   \"*\"     \" \"       \"*\"      \" \"    \" \"      \"*\"    \n#> 5  ( 1 ) \"*\"   \"*\"     \"*\"       \"*\"      \" \"    \" \"      \"*\"    \n#> 6  ( 1 ) \"*\"   \"*\"     \"*\"       \"*\"      \"*\"    \" \"      \"*\"    \n#> 7  ( 1 ) \"*\"   \"*\"     \"*\"       \"*\"      \"*\"    \"*\"      \"*\"\n```\n\n\n:::\n\n```{.r .cell-code}\nwhich.min(sumario.reg.fwd$cp)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 6\n```\n\n\n:::\n\n```{.r .cell-code}\nplot(sumario.reg.fwd$cp,xlab=\"Número de Variáveis\",ylab=\"Cp\")\npoints(6,sumario.reg.fwd$cp[6],pch=20,col=\"red\")\n```\n\n::: {.cell-output-display}\n![](Aula07.3_files/figure-html/FR-1.png){width=90%}\n:::\n:::\n\n\n\n\n## Como extrair detalhes do ajuste\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncoef(ajusreg.fwd,6)  \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>   (Intercept)         idade       quartos     banheiros      m2_princ \n#>  2.551855e+02 -9.302566e-01 -4.456961e+01  9.461555e+00  1.441541e-01 \n#>        m2_tot       andares \n#>  9.183278e-05  3.486187e+01\n```\n\n\n:::\n:::\n\n\n\n\n## Backward Stepwise (passo a passo atrás)\n\n\n\n\n::: {.cell figure.width='6.5'}\n\n```{.r .cell-code}\najusreg.bwd <- regsubsets(preco_m ~ . , data=conj_treino,nvmax=13, method=\"backward\")\nsumario.reg.bwd <- summary(ajusreg.bwd)\nsumario.reg.bwd\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> Subset selection object\n#> Call: regsubsets.formula(preco_m ~ ., data = conj_treino, nvmax = 13, \n#>     method = \"backward\")\n#> 7 Variables  (and intercept)\n#>           Forced in Forced out\n#> idade         FALSE      FALSE\n#> quartos       FALSE      FALSE\n#> banheiros     FALSE      FALSE\n#> m2_princ      FALSE      FALSE\n#> m2_tot        FALSE      FALSE\n#> m2_porao      FALSE      FALSE\n#> andares       FALSE      FALSE\n#> 1 subsets of each size up to 7\n#> Selection Algorithm: backward\n#>          idade quartos banheiros m2_princ m2_tot m2_porao andares\n#> 1  ( 1 ) \" \"   \" \"     \" \"       \"*\"      \" \"    \" \"      \" \"    \n#> 2  ( 1 ) \" \"   \"*\"     \" \"       \"*\"      \" \"    \" \"      \" \"    \n#> 3  ( 1 ) \" \"   \"*\"     \" \"       \"*\"      \" \"    \" \"      \"*\"    \n#> 4  ( 1 ) \"*\"   \"*\"     \" \"       \"*\"      \" \"    \" \"      \"*\"    \n#> 5  ( 1 ) \"*\"   \"*\"     \"*\"       \"*\"      \" \"    \" \"      \"*\"    \n#> 6  ( 1 ) \"*\"   \"*\"     \"*\"       \"*\"      \"*\"    \" \"      \"*\"    \n#> 7  ( 1 ) \"*\"   \"*\"     \"*\"       \"*\"      \"*\"    \"*\"      \"*\"\n```\n\n\n:::\n\n```{.r .cell-code}\nwhich.min(sumario.reg.bwd$cp)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 6\n```\n\n\n:::\n\n```{.r .cell-code}\nplot(sumario.reg.bwd$cp,xlab=\"Número de Variáveis\",ylab=\"Cp\")\npoints(6,sumario.reg.bwd$cp[6],pch=20,col=\"red\")\n```\n\n::: {.cell-output-display}\n![](Aula07.3_files/figure-html/BR-1.png){width=90%}\n:::\n:::\n\n\n\n\n## Como extrair detalhes do ajuste\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncoef(ajusreg.bwd,6)  \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>   (Intercept)         idade       quartos     banheiros      m2_princ \n#>  2.551855e+02 -9.302566e-01 -4.456961e+01  9.461555e+00  1.441541e-01 \n#>        m2_tot       andares \n#>  9.183278e-05  3.486187e+01\n```\n\n\n:::\n:::\n\n\n\n\n## Testando outra estatística de seleção de modelos - BIC\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\najusreg.fwd1 <- regsubsets(preco_m ~ . , data=conj_treino,nvmax=13, method=\"forward\")\nsumario.reg.fwd1 <- summary(ajusreg.fwd1)\nnames(sumario.reg.fwd1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] \"which\"  \"rsq\"    \"rss\"    \"adjr2\"  \"cp\"     \"bic\"    \"outmat\" \"obj\"\n```\n\n\n:::\n\n```{.r .cell-code}\nwhich.min(sumario.reg.fwd1$bic)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 4\n```\n\n\n:::\n\n```{.r .cell-code}\nplot(sumario.reg.fwd1$bic,xlab=\"Número de Variáveis\",ylab=\"BIC\")\npoints(4,sumario.reg.fwd1$bic[4],pch=20,col=\"red\")\n```\n\n::: {.cell-output-display}\n![](Aula07.3_files/figure-html/BIC-1.png){width=90%}\n:::\n\n```{.r .cell-code}\ncoef(ajusreg.fwd1,4)  \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> (Intercept)       idade     quartos    m2_princ     andares \n#> 269.5362098  -0.9457714 -43.3967857   0.1469077  35.2705008\n```\n\n\n:::\n:::\n\n\n\n\n## Usando o Cp novamente\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwhich.min(sumario.reg.fwd1$cp)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 6\n```\n\n\n:::\n\n```{.r .cell-code}\nplot(sumario.reg.fwd1$cp,xlab=\"Número de Variáveis\",ylab=\"Cp\")\npoints(6,sumario.reg.fwd1$cp[6],pch=20,col=\"red\")\n```\n\n::: {.cell-output-display}\n![](Aula07.3_files/figure-html/cp_denovo-1.png){width=90%}\n:::\n\n```{.r .cell-code}\ncoef(ajusreg.fwd1,6)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>   (Intercept)         idade       quartos     banheiros      m2_princ \n#>  2.551855e+02 -9.302566e-01 -4.456961e+01  9.461555e+00  1.441541e-01 \n#>        m2_tot       andares \n#>  9.183278e-05  3.486187e+01\n```\n\n\n:::\n:::\n\n\n\n\n## Comparando os dois modelos com o lm()\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Usando o lm para ajustar o modelo com as variáveis selecionadas pelo BIC\nmod_bic <- lm(preco_m ~ idade + quartos + m2_princ + andares, data=conj_treino)\nsummary(mod_bic)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> \n#> Call:\n#> lm(formula = preco_m ~ idade + quartos + m2_princ + andares, \n#>     data = conj_treino)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -91.569 -31.680  -1.459  34.349  95.522 \n#> \n#> Coefficients:\n#>               Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept) 269.536210   8.833668  30.512  < 2e-16 ***\n#> idade        -0.945771   0.137707  -6.868 1.05e-11 ***\n#> quartos     -43.396786   2.103100 -20.635  < 2e-16 ***\n#> m2_princ      0.146908   0.002991  49.120  < 2e-16 ***\n#> andares      35.270501   3.431146  10.280  < 2e-16 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 40.6 on 1187 degrees of freedom\n#> Multiple R-squared:  0.7515,\tAdjusted R-squared:  0.7507 \n#> F-statistic: 897.4 on 4 and 1187 DF,  p-value: < 2.2e-16\n```\n\n\n:::\n\n```{.r .cell-code}\nmod_cp <- lm(preco_m ~ idade + quartos + banheiros + m2_princ + m2_tot + andares, data=conj_treino)\nsummary(mod_cp)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> \n#> Call:\n#> lm(formula = preco_m ~ idade + quartos + banheiros + m2_princ + \n#>     m2_tot + andares, data = conj_treino)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -90.680 -31.815  -0.952  33.701  94.047 \n#> \n#> Coefficients:\n#>               Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  2.552e+02  9.834e+00  25.949  < 2e-16 ***\n#> idade       -9.303e-01  1.373e-01  -6.777 1.93e-11 ***\n#> quartos     -4.457e+01  2.173e+00 -20.513  < 2e-16 ***\n#> banheiros    9.462e+00  3.367e+00   2.810  0.00503 ** \n#> m2_princ     1.442e-01  3.095e-03  46.574  < 2e-16 ***\n#> m2_tot       9.183e-05  4.410e-05   2.083  0.03750 *  \n#> andares      3.486e+01  3.587e+00   9.718  < 2e-16 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 40.44 on 1185 degrees of freedom\n#> Multiple R-squared:  0.7538,\tAdjusted R-squared:  0.7525 \n#> F-statistic: 604.6 on 6 and 1185 DF,  p-value: < 2.2e-16\n```\n\n\n:::\n:::\n\n\n\n\n## Avaliando Colinearidade\n\nUma investigação minuciosa da multicollinearidade envolverá a análise do valor do $R^2$ que resulta da regressão de cada uma das variáveis explicativas contra todas as outras. A relação entre as variáveis explicativas pode ser julgada examinando uma quantidade chamada fator de inflacionário da variância (FIV) ou Variance Inflation Factor (VIF). Seja $Rj~^{2}$ o quadrado do coeficiente de correlação múltipla que resulta quando a variável explicativa $Xj~$ é ajustada contra todas as outras variáveis explicativas. Então o vif para $Xj~$ é $VIFj = 1 / (1-Rj~^{2})$\n\n**A regra geral é que vifs superiores a 4 justificam novas investigações, enquanto VIFs superiores a 10 são sinais de multicollinearidade grave que requerem correção.**\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(car)\nvif(mod_bic)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>    idade  quartos m2_princ  andares \n#> 1.121531 2.034438 2.171839 1.025749\n```\n\n\n:::\n\n```{.r .cell-code}\nvif(mod_cp)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>     idade   quartos banheiros  m2_princ    m2_tot   andares \n#>  1.122951  2.187800  1.496041  2.343757  1.114370  1.129692\n```\n\n\n:::\n:::\n\n\n\n\n## Testando os dois modelos com o conjunto de teste\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Modelo com base no Cp\nsummary(mod_cp)$sigma\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 40.44459\n```\n\n\n:::\n\n```{.r .cell-code}\nsummary(mod_cp)$adj.r.squared\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 0.7525384\n```\n\n\n:::\n\n```{.r .cell-code}\nsqrt(mean((conj_teste$preco_m - predict(mod_cp, conj_teste)) ^ 2))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 41.50369\n```\n\n\n:::\n\n```{.r .cell-code}\n# Modelo com base no BIC\nsummary(mod_bic)$sigma\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 40.59764\n```\n\n\n:::\n\n```{.r .cell-code}\nsummary(mod_bic)$adj.r.squared\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 0.750662\n```\n\n\n:::\n\n```{.r .cell-code}\nsqrt(mean((conj_teste$preco_m - predict(mod_bic, conj_teste)) ^ 2))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 41.56818\n```\n\n\n:::\n:::\n\n\n\n\n## Comparando valor real vs previsão\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nconj_treino$Previsoes <- predict(mod_bic, data=conj_treino)\nggplot(conj_treino, aes(x=Previsoes, y=preco_m)) + \n  geom_point() +\n  geom_abline(color = \"darkblue\") +\n  ggtitle(\"Preço da Casa vs. Previsões do modelo linear\")\n```\n\n::: {.cell-output-display}\n![](Aula07.3_files/figure-html/unnamed-chunk-3-1.png){width=90%}\n:::\n:::\n\n\n\n\n## Avaliando os resíduos\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nresidualPlots(mod_bic)\n```\n\n::: {.cell-output-display}\n![](Aula07.3_files/figure-html/unnamed-chunk-4-1.png){width=90%}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#>            Test stat Pr(>|Test stat|)\n#> idade        -0.6066           0.5443\n#> quartos       0.6446           0.5193\n#> m2_princ      0.4534           0.6504\n#> andares       0.9874           0.3236\n#> Tukey test    0.6214           0.5343\n```\n\n\n:::\n:::\n",
    "supporting": [
      "Aula07.3_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}