{
  "hash": "ef1742ad9723f1102d82a511868d9b44",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Avaliando dados e reduzindo as dimensões\"\nauthor: \"Ricardo Accioly\"\ndate: ' 2025-11-11 '\nformat:\n html:\n    code-link: true\n    fig-width: 9\n    fig-height: 7\n    fig-dpi: 300\nknitr:\n  opts_chunk: \n    out.width: 90%\n    comment: \"#>\"\nexecute:\n  freeze: auto\n  warning: false\n  message: false\n---\n\n## Entrada de dados no R\n\n## Lendo dados de arquivos csv\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\n# url <- \"https://www.gov.br/anp/pt-br/centrais-de-conteudo/dados-abertos/arquivos-acervo-de-dados-tecnicos/tabela-pocos.csv\"\n# Não funciona mais a ANP mudou o acesso.\n```\n:::\n\n\n## Lendo arquivo excel\n\n\n::: {.cell}\n\n```{.r .cell-code}\npocos <- read_xlsx(\"Tabela_pocos_2025_Novembro_09.xlsx\")\nhead(pocos)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 6 × 58\n#>   POCO        CADASTRO OPERADOR POCO_OPERADOR ESTADO BACIA BLOCO SIG_CAMPO CAMPO\n#>   <chr>          <dbl> <chr>    <chr>         <chr>  <chr> <chr> <chr>     <chr>\n#> 1 1-AA-1-RN    7.21e11 <NA>     1AA  0001  RN RN     Poti… Bras… <NA>      <NA> \n#> 2 1-ABV-1D-RN  7.21e11 PetroRe… 1ABV 0001D RN RN     Poti… BT-P… PAT       PATA…\n#> 3 1-AB-1A-SE   9.01e11 <NA>     1AB  0001A SE SE     Serg… Bras… <NA>      <NA> \n#> 4 1-AB-1-BA    2.02e11 <NA>     1AB  0001  BA BA     Tuca… Bras… <NA>      <NA> \n#> 5 1-AB-1-PA    6.00e11 <NA>     1AB  0001  PA PA     Amaz… Bras… <NA>      <NA> \n#> 6 1-AB-1-SE    9.01e11 <NA>     1AB  0001  SE SE     Serg… Bras… <NA>      <NA> \n#> # ℹ 49 more variables: TERRA_MAR <chr>, POCO_POS_ANP <chr>, TIPO <dbl>,\n#> #   CATEGORIA <chr>, RECLASSIFICACAO <chr>, SITUACAO <chr>, INÍCIO <dttm>,\n#> #   TÉRMINO <dttm>, CONCLUSAO <dttm>, TITULARIDADE <chr>,\n#> #   LATITUDE_BASE_DD <dbl>, LONGITUDE_BASE_DD <dbl>, DATUM_HORIZONTAL <chr>,\n#> #   TIPO_DE_COORDENADA_DE_BASE <chr>, DIRECAO <chr>,\n#> #   PROFUNDIDADE_VERTICAL_M <dbl>, PROFUNDIDADE_SONDADOR_M <dbl>,\n#> #   PROFUNDIDADE_MEDIDA_M <dbl>, REFERENCIA_DE_PROFUNDIDADE <chr>, …\n```\n\n\n:::\n:::\n\n\n## Bibliotecas\n\nVamos carregar as bibliotecas que serão usadas na manipulação e visualização de dados.\n\nO pacote tidyverse carrega diversos pacotes muito uteis na manipulação e visualização de dados\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"tidyverse\")\n```\n:::\n\n\nVamos primeiro conhecer o que tem na base de dados pocos. A base de dados possui 31131 linhas\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass(pocos)  # Tipo de base de dados\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n```\n\n\n:::\n:::\n\n\n## Dados de poços\n\nOs dados da tabela poços tem 60 colunas, mas vejam que existem diversas variáveis com dados ausentes \"NA\".\n\n## Variaveis com dados ausentes\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(pocos) # estrutura da base de dados\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> Rows: 31,131\n#> Columns: 58\n#> $ POCO                       <chr> \"1-AA-1-RN\", \"1-ABV-1D-RN\", \"1-AB-1A-SE\", \"…\n#> $ CADASTRO                   <dbl> 721000712200, 721000514700, 901200015200, 2…\n#> $ OPERADOR                   <chr> NA, \"PetroRecôncavo\", NA, NA, NA, NA, NA, N…\n#> $ POCO_OPERADOR              <chr> \"1AA  0001  RN\", \"1ABV 0001D RN\", \"1AB  000…\n#> $ ESTADO                     <chr> \"RN\", \"RN\", \"SE\", \"BA\", \"PA\", \"SE\", \"SP\", \"…\n#> $ BACIA                      <chr> \"Potiguar\", \"Potiguar\", \"Sergipe\", \"Tucano …\n#> $ BLOCO                      <chr> \"Brasil\", \"BT-POT-9\", \"Brasil\", \"Brasil\", \"…\n#> $ SIG_CAMPO                  <chr> NA, \"PAT\", NA, NA, NA, NA, NA, NA, NA, NA, …\n#> $ CAMPO                      <chr> NA, \"PATATIVA\", NA, NA, NA, NA, NA, NA, NA,…\n#> $ TERRA_MAR                  <chr> \"T\", \"T\", \"T\", \"T\", \"T\", \"T\", \"T\", \"T\", \"T\"…\n#> $ POCO_POS_ANP               <chr> \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\"…\n#> $ TIPO                       <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#> $ CATEGORIA                  <chr> \"Pioneiro\", \"Pioneiro\", \"Pioneiro\", \"Pionei…\n#> $ RECLASSIFICACAO            <chr> \"SECO SEM INDÍCIOS\", \"SECO SEM INDÍCIOS\", \"…\n#> $ SITUACAO                   <chr> \"CEDIDO PARA A CAPTAÇÃO DE ÁGUA\", \"ABANDONA…\n#> $ INÍCIO                     <dttm> 1984-01-21, 1997-03-17, 1963-11-11, 1964-0…\n#> $ TÉRMINO                    <dttm> 1984-01-29, 1997-05-23, 1964-06-30, 1964-0…\n#> $ CONCLUSAO                  <dttm> 1984-01-29, 1997-05-23, 1964-06-30, 1964-0…\n#> $ TITULARIDADE               <chr> \"Público\", \"Público\", \"Público\", \"Público\",…\n#> $ LATITUDE_BASE_DD           <dbl> -4.9180856, -5.4182733, -11.0525608, -9.987…\n#> $ LONGITUDE_BASE_DD          <dbl> -37.22464, -37.64420, -37.14529, -38.67656,…\n#> $ DATUM_HORIZONTAL           <chr> \"SIRGAS2000\", \"SIRGAS2000\", \"SIRGAS2000\", \"…\n#> $ TIPO_DE_COORDENADA_DE_BASE <chr> \"Definitiva\", \"Definitiva\", \"Definitiva\", \"…\n#> $ DIRECAO                    <chr> \"Vertical\", \"Direcional\", \"Vertical\", \"Vert…\n#> $ PROFUNDIDADE_VERTICAL_M    <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ PROFUNDIDADE_SONDADOR_M    <dbl> 1062.0, 3755.0, 3341.5, 1670.0, 1380.0, 195…\n#> $ PROFUNDIDADE_MEDIDA_M      <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ REFERENCIA_DE_PROFUNDIDADE <chr> \"MR\", \"MR\", \"MR\", \"MR\", \"MR\", \"MR\", \"MR\", \"…\n#> $ MESA_ROTATIVA              <dbl> 14.0, 106.0, 8.0, 304.4, 96.0, 8.0, 502.0, …\n#> $ COTA_ALTIMETRICA_M         <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ LAMINA_D_AGUA_M            <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ DATUM_VERTICAL             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ UNIDADE_ESTRATIGRAFICA     <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ GEOLOGIA_GRUPO_FINAL       <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ GEOLOGIA_FORMACAO_FINAL    <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ GEOLOGIA_MEMBRO_FINAL      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ CDPE                       <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ AGP                        <chr> NA, \"Existe\", NA, \"Existe\", \"Existe\", NA, \"…\n#> $ PC                         <chr> \"Existe\", \"Existe\", \"Existe\", \"Existe\", \"Ex…\n#> $ PAG                        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ PERFIS_CONVENCIONAIS       <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ DURANTE_PERFURACAO         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ PERFIS_DIGITAIS            <chr> \"Existe\", \"Existe\", \"Existe\", \"Existe\", \"Ex…\n#> $ PERFIS_PROCESSADOS         <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ PERFIS_ESPECIAIS           <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ AMOSTRA_LATERAL            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ SISMICA                    <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ TABELA_TEMPO_PROFUNDIDADE  <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ DADOS_DIRECIONAIS          <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ TESTE_A_CABO               <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ TESTE_DE_FORMACAO          <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ CANHONEIO                  <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ TESTEMUNHO                 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ GEOQUIMICA                 <chr> \"Existe\", \"Existe\", \"Existe\", \"Existe\", \"Ex…\n#> $ SIG_SONDA                  <chr> \"CC-1\", \"SC-110\", \"SC-61\", \"SC-53\", \"SM-1\",…\n#> $ NOM_SONDA                  <chr> NA, \"SONDA CONVENCIONAL 110\", \"SONDA CONVEN…\n#> $ ATINGIU_PRESAL             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ DHA_ATUALIZACAO            <dttm> 2025-11-09, 2025-11-09, 2025-11-09, 2025-1…\n```\n\n\n:::\n:::\n\n\n## Criando um filtro de dados ausentes\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn <-  nrow(pocos)\n\n## Calculando razão de valores ausentes\nval_ausentes_df <- pocos %>% \n  summarize(across(everything(), ~ sum(is.na(.)))) %>% \n  pivot_longer(everything(), names_to = \"variavel\", values_to = \"num_val_ausentes\") %>% \n  mutate(razao_val_ausente = num_val_ausentes / n)\n\n## Vendo resultado\nknitr::kable(val_ausentes_df, booktabs = TRUE)\n```\n\n::: {.cell-output-display}\n\n\n|variavel                   | num_val_ausentes| razao_val_ausente|\n|:--------------------------|----------------:|-----------------:|\n|POCO                       |                0|         0.0000000|\n|CADASTRO                   |                0|         0.0000000|\n|OPERADOR                   |             2940|         0.0944396|\n|POCO_OPERADOR              |                0|         0.0000000|\n|ESTADO                     |                0|         0.0000000|\n|BACIA                      |                0|         0.0000000|\n|BLOCO                      |             4065|         0.1305772|\n|SIG_CAMPO                  |             4095|         0.1315409|\n|CAMPO                      |             4095|         0.1315409|\n|TERRA_MAR                  |                0|         0.0000000|\n|POCO_POS_ANP               |                0|         0.0000000|\n|TIPO                       |                0|         0.0000000|\n|CATEGORIA                  |                0|         0.0000000|\n|RECLASSIFICACAO            |             1770|         0.0568565|\n|SITUACAO                   |              112|         0.0035977|\n|INÍCIO                     |                0|         0.0000000|\n|TÉRMINO                    |             1863|         0.0598439|\n|CONCLUSAO                  |              119|         0.0038226|\n|TITULARIDADE               |                0|         0.0000000|\n|LATITUDE_BASE_DD           |                0|         0.0000000|\n|LONGITUDE_BASE_DD          |                0|         0.0000000|\n|DATUM_HORIZONTAL           |                0|         0.0000000|\n|TIPO_DE_COORDENADA_DE_BASE |                0|         0.0000000|\n|DIRECAO                    |                0|         0.0000000|\n|PROFUNDIDADE_VERTICAL_M    |            18294|         0.5876458|\n|PROFUNDIDADE_SONDADOR_M    |             1050|         0.0337284|\n|PROFUNDIDADE_MEDIDA_M      |            16789|         0.5393017|\n|REFERENCIA_DE_PROFUNDIDADE |                0|         0.0000000|\n|MESA_ROTATIVA              |                0|         0.0000000|\n|COTA_ALTIMETRICA_M         |            15867|         0.5096849|\n|LAMINA_D_AGUA_M            |            13833|         0.4443481|\n|DATUM_VERTICAL             |            13349|         0.4288009|\n|UNIDADE_ESTRATIGRAFICA     |            31131|         1.0000000|\n|GEOLOGIA_GRUPO_FINAL       |            27454|         0.8818862|\n|GEOLOGIA_FORMACAO_FINAL    |            27164|         0.8725707|\n|GEOLOGIA_MEMBRO_FINAL      |            30897|         0.9924834|\n|CDPE                       |            21350|         0.6858116|\n|AGP                        |            24206|         0.7775529|\n|PC                         |            22618|         0.7265427|\n|PAG                        |            29703|         0.9541293|\n|PERFIS_CONVENCIONAIS       |            22003|         0.7067874|\n|DURANTE_PERFURACAO         |            27927|         0.8970801|\n|PERFIS_DIGITAIS            |            10389|         0.3337188|\n|PERFIS_PROCESSADOS         |            29796|         0.9571167|\n|PERFIS_ESPECIAIS           |            30446|         0.9779962|\n|AMOSTRA_LATERAL            |            30128|         0.9677813|\n|SISMICA                    |            29429|         0.9453278|\n|TABELA_TEMPO_PROFUNDIDADE  |            30234|         0.9711863|\n|DADOS_DIRECIONAIS          |            22794|         0.7321962|\n|TESTE_A_CABO               |            26592|         0.8541968|\n|TESTE_DE_FORMACAO          |            30476|         0.9789599|\n|CANHONEIO                  |            29747|         0.9555427|\n|TESTEMUNHO                 |            30692|         0.9858983|\n|GEOQUIMICA                 |            27985|         0.8989432|\n|SIG_SONDA                  |              122|         0.0039189|\n|NOM_SONDA                  |             4156|         0.1335004|\n|ATINGIU_PRESAL             |            21894|         0.7032861|\n|DHA_ATUALIZACAO            |                0|         0.0000000|\n\n\n:::\n\n```{.r .cell-code}\n## filtro\nval_ausente_filtro <- val_ausentes_df %>% \n  filter(razao_val_ausente <= 0.5) %>% \n  pull(variavel)\n\n# Aplicando o filtro\npoco_filtrado <- pocos %>% \n  select(all_of(val_ausente_filtro))\n```\n:::\n\n\n## Visualizando os dados filtrados\n\n\n::: {.cell}\n\n```{.r .cell-code}\npoco_filtrado %>% \n  glimpse() # estrutura da base de dados filtrada\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> Rows: 31,131\n#> Columns: 33\n#> $ POCO                       <chr> \"1-AA-1-RN\", \"1-ABV-1D-RN\", \"1-AB-1A-SE\", \"…\n#> $ CADASTRO                   <dbl> 721000712200, 721000514700, 901200015200, 2…\n#> $ OPERADOR                   <chr> NA, \"PetroRecôncavo\", NA, NA, NA, NA, NA, N…\n#> $ POCO_OPERADOR              <chr> \"1AA  0001  RN\", \"1ABV 0001D RN\", \"1AB  000…\n#> $ ESTADO                     <chr> \"RN\", \"RN\", \"SE\", \"BA\", \"PA\", \"SE\", \"SP\", \"…\n#> $ BACIA                      <chr> \"Potiguar\", \"Potiguar\", \"Sergipe\", \"Tucano …\n#> $ BLOCO                      <chr> \"Brasil\", \"BT-POT-9\", \"Brasil\", \"Brasil\", \"…\n#> $ SIG_CAMPO                  <chr> NA, \"PAT\", NA, NA, NA, NA, NA, NA, NA, NA, …\n#> $ CAMPO                      <chr> NA, \"PATATIVA\", NA, NA, NA, NA, NA, NA, NA,…\n#> $ TERRA_MAR                  <chr> \"T\", \"T\", \"T\", \"T\", \"T\", \"T\", \"T\", \"T\", \"T\"…\n#> $ POCO_POS_ANP               <chr> \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\", \"N\"…\n#> $ TIPO                       <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n#> $ CATEGORIA                  <chr> \"Pioneiro\", \"Pioneiro\", \"Pioneiro\", \"Pionei…\n#> $ RECLASSIFICACAO            <chr> \"SECO SEM INDÍCIOS\", \"SECO SEM INDÍCIOS\", \"…\n#> $ SITUACAO                   <chr> \"CEDIDO PARA A CAPTAÇÃO DE ÁGUA\", \"ABANDONA…\n#> $ INÍCIO                     <dttm> 1984-01-21, 1997-03-17, 1963-11-11, 1964-0…\n#> $ TÉRMINO                    <dttm> 1984-01-29, 1997-05-23, 1964-06-30, 1964-0…\n#> $ CONCLUSAO                  <dttm> 1984-01-29, 1997-05-23, 1964-06-30, 1964-0…\n#> $ TITULARIDADE               <chr> \"Público\", \"Público\", \"Público\", \"Público\",…\n#> $ LATITUDE_BASE_DD           <dbl> -4.9180856, -5.4182733, -11.0525608, -9.987…\n#> $ LONGITUDE_BASE_DD          <dbl> -37.22464, -37.64420, -37.14529, -38.67656,…\n#> $ DATUM_HORIZONTAL           <chr> \"SIRGAS2000\", \"SIRGAS2000\", \"SIRGAS2000\", \"…\n#> $ TIPO_DE_COORDENADA_DE_BASE <chr> \"Definitiva\", \"Definitiva\", \"Definitiva\", \"…\n#> $ DIRECAO                    <chr> \"Vertical\", \"Direcional\", \"Vertical\", \"Vert…\n#> $ PROFUNDIDADE_SONDADOR_M    <dbl> 1062.0, 3755.0, 3341.5, 1670.0, 1380.0, 195…\n#> $ REFERENCIA_DE_PROFUNDIDADE <chr> \"MR\", \"MR\", \"MR\", \"MR\", \"MR\", \"MR\", \"MR\", \"…\n#> $ MESA_ROTATIVA              <dbl> 14.0, 106.0, 8.0, 304.4, 96.0, 8.0, 502.0, …\n#> $ LAMINA_D_AGUA_M            <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ DATUM_VERTICAL             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ PERFIS_DIGITAIS            <chr> \"Existe\", \"Existe\", \"Existe\", \"Existe\", \"Ex…\n#> $ SIG_SONDA                  <chr> \"CC-1\", \"SC-110\", \"SC-61\", \"SC-53\", \"SM-1\",…\n#> $ NOM_SONDA                  <chr> NA, \"SONDA CONVENCIONAL 110\", \"SONDA CONVEN…\n#> $ DHA_ATUALIZACAO            <dttm> 2025-11-09, 2025-11-09, 2025-11-09, 2025-1…\n```\n\n\n:::\n:::\n\n\n## Salvando os dados filtrados\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_csv(poco_filtrado, \"pocos_filtrados.csv\")\n```\n:::\n\n",
    "supporting": [
      "Aula01.0_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}