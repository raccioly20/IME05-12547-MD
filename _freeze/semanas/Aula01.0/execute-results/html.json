{
  "hash": "2549a8cf793845da91a56ef6c2344c7e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Avaliando dados e reduzindo as dimensões\"\nauthor: \"Ricardo Accioly\"\ndate: ' 2025-06-27 '\nformat:\n html:\n    code-link: true\n    fig-width: 9\n    fig-height: 7\n    fig-dpi: 300\nknitr:\n  opts_chunk: \n    out.width: 90%\n    comment: \"#>\"\nexecute:\n  freeze: auto\n  warning: false\n  message: false\n---\n\n## Entrada de dados no R\n\n## Lendo dados de arquivos csv\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nurl <- \"https://www.gov.br/anp/pt-br/centrais-de-conteudo/dados-abertos/arquivos-acervo-de-dados-tecnicos/tabela-pocos.csv\"\n```\n:::\n\n\n## O read_delim permite que seja definido o tipo de delimitador dos dados\n\n\n::: {.cell}\n\n```{.r .cell-code}\npocos <- read_delim(url, delim = \";\", locale= locale(decimal_mark = \",\"), col_names = TRUE)\nhead(pocos)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 6 × 60\n#>   POCO        CADASTRO OPERADOR POCO_OPERADOR ESTADO BACIA BLOCO SIG_CAMPO CAMPO\n#>   <chr>       <chr>    <chr>    <chr>         <chr>  <chr> <chr> <chr>     <chr>\n#> 1 7-PRG-59H-… 7428102… Equinor… BMC7B15       RJ     Camp… <NA>  \"PRG  \"   PERE…\n#> 2 7-GVR-26D-… 5009002… Eneva    7GVR26DMA     MA     Parn… PN-T… \"GVR  \"   GAVI…\n#> 3 6-BRSA-134… 7428102… Petrobr… 6MLS233RJS    RJ     Camp… <NA>  \"MLS  \"   MARL…\n#> 4 7-CP-1505D… 9012002… Carmo    7CP1505DSE    SE     Serg… <NA>  \"CP   \"   CARM…\n#> 5 7-GVP-6-MA  5009002… Eneva    7GVP6MA       MA     Parn… PN-T… \"GVP  \"   GAVI…\n#> 6 7-TIE-1D-BA 2024002… SPE Tiê… 7TIE1DBA      BA     Recô… <NA>  \"TIE  \"   TIÊ  \n#> # ℹ 51 more variables: TERRA_MAR <chr>, POCO_POS_ANP <chr>, TIPO <chr>,\n#> #   CATEGORIA <chr>, RECLASSIFICACAO <chr>, SITUACAO <chr>, INICIO <chr>,\n#> #   TERMINO <chr>, CONCLUSAO <chr>, TITULARIDADE <chr>, LATITUDE_BASE_4C <chr>,\n#> #   LONGITUDE_BASE_4C <chr>, LATITUDE_BASE_DD <dbl>, LONGITUDE_BASE_DD <dbl>,\n#> #   DATUM_HORIZONTAL <chr>, TIPO_DE_COORDENADA_DE_BASE <chr>, DIRECAO <chr>,\n#> #   PROFUNDIDADE_VERTICAL_M <dbl>, PROFUNDIDADE_SONDADOR_M <dbl>,\n#> #   PROFUNDIDADE_MEDIDA_M <dbl>, REFERENCIA_DE_PROFUNDIDADE <chr>, …\n```\n\n\n:::\n:::\n\n\n## Bibliotecas\n\nVamos carregar as bibliotecas que serão usadas na manipulação e visualização de dados.\n\nO pacote tidyverse carrega diversos pacotes muito uteis na manipulação e visualização de dados\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"tidyverse\")\n```\n:::\n\n\nVamos primeiro conhecer o que tem na base de dados pocos. A base de dados possui 30566 linhas\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass(pocos)  # Tipo de base de dados\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] \"spec_tbl_df\" \"tbl_df\"      \"tbl\"         \"data.frame\"\n```\n\n\n:::\n:::\n\n\n## Dados de poços\n\nOs dados da tabela poços tem 60 colunas, mas vejam que existem diversas variáveis com dados ausentes \"NA\".\n\n## Variaveis com dados ausentes\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(pocos) # estrutura da base de dados\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> Rows: 30,566\n#> Columns: 60\n#> $ POCO                       <chr> \"7-PRG-59H-RJS\", \"7-GVR-26D-MA\", \"6-BRSA-13…\n#> $ CADASTRO                   <chr> \"74281028968\", \"50090029009\", \"74281028991\"…\n#> $ OPERADOR                   <chr> \"Equinor Brasil\", \"Eneva\", \"Petrobras\", \"Ca…\n#> $ POCO_OPERADOR              <chr> \"BMC7B15\", \"7GVR26DMA\", \"6MLS233RJS\", \"7CP1…\n#> $ ESTADO                     <chr> \"RJ\", \"MA\", \"RJ\", \"SE\", \"MA\", \"BA\", \"SE\", \"…\n#> $ BACIA                      <chr> \"Campos\", \"Parnaíba\", \"Campos\", \"Sergipe\", …\n#> $ BLOCO                      <chr> NA, \"PN-T-68\", NA, NA, \"PN-T-67\", NA, NA, N…\n#> $ SIG_CAMPO                  <chr> \"PRG  \", \"GVR  \", \"MLS  \", \"CP   \", \"GVP  \"…\n#> $ CAMPO                      <chr> \"PEREGRINO\", \"GAVIÃO REAL\", \"MARLIM SUL\", \"…\n#> $ TERRA_MAR                  <chr> \"M\", \"T\", \"M\", \"T\", \"T\", \"T\", \"T\", \"T\", \"T\"…\n#> $ POCO_POS_ANP               <chr> \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", \"S\"…\n#> $ TIPO                       <chr> \"7 \", \"7 \", \"6 \", \"7 \", \"7 \", \"7 \", \"7 \", \"…\n#> $ CATEGORIA                  <chr> \"Desenvolvimento\", \"Desenvolvimento\", \"Jazi…\n#> $ RECLASSIFICACAO            <chr> \"INDEFINIDO\", \"ABANDONADO POR OUTRAS RAZÕES…\n#> $ SITUACAO                   <chr> \"ABANDONADO PERMANENTEMENTE\", \"ARRASADO\", \"…\n#> $ INICIO                     <chr> \"24/04/2017 00:00\", \"21/06/2017 00:00\", \"28…\n#> $ TERMINO                    <chr> \"01/05/2017 00:00\", \"05/07/2017 00:00\", \"16…\n#> $ CONCLUSAO                  <chr> \"13/05/2017 00:00\", \"11/07/2017 00:00\", \"30…\n#> $ TITULARIDADE               <chr> \"Público\", \"Público\", \"Público\", \"Público\",…\n#> $ LATITUDE_BASE_4C           <chr> \"-23:17:45,778\", \"-04:51:16,170\", \"-22:30:5…\n#> $ LONGITUDE_BASE_4C          <chr> \"-41:12:28,246\", \"-44:22:32,123\", \"-40:01:0…\n#> $ LATITUDE_BASE_DD           <dbl> -23.296049, -4.854492, -22.515081, -10.6391…\n#> $ LONGITUDE_BASE_DD          <dbl> -41.20785, -44.37559, -40.01919, -36.98067,…\n#> $ DATUM_HORIZONTAL           <chr> \"SIRGAS2000\", \"SIRGAS2000\", \"SIRGAS2000\", \"…\n#> $ TIPO_DE_COORDENADA_DE_BASE <chr> \"Definitiva\", \"Definitiva\", \"Definitiva\", \"…\n#> $ DIRECAO                    <chr> \"Horizontal\", \"Direcional\", \"Vertical\", \"Di…\n#> $ PROFUNDIDADE_VERTICAL_M    <dbl> 760.00, 1470.76, -4572.00, -834.70, 1344.00…\n#> $ PROFUNDIDADE_SONDADOR_M    <dbl> 760.00, 2210.00, 4600.00, 935.00, 1430.00, …\n#> $ PROFUNDIDADE_MEDIDA_M      <dbl> 760.00, 2211.00, 4604.00, 934.30, 1430.00, …\n#> $ REFERENCIA_DE_PROFUNDIDADE <chr> \"MR\", \"MR\", \"MR\", \"MR\", \"MR\", \"MR\", \"MR\", \"…\n#> $ MESA_ROTATIVA              <dbl> 50.00, 143.00, 32.00, 55.78, 86.00, 109.77,…\n#> $ COTA_ALTIMETRICA_M         <dbl> 0.00, 137.00, 0.00, 50.78, 80.00, 103.84, 6…\n#> $ LAMINA_D_AGUA_M            <dbl> 122, 0, 1107, 0, 0, 0, 0, 0, 0, 0, 0, 0, 12…\n#> $ DATUM_VERTICAL             <chr> \"NM\", \"NM\", \"NM\", \"NM\", \"NM\", \"NM\", \"NM\", \"…\n#> $ UNIDADE_ESTRATIGRAFICA     <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ GEOLOGIA_GRUPO_FINAL       <chr> \"Campos\", \"Canindé\", \"Lagoa Feia\", \"Corurip…\n#> $ GEOLOGIA_FORMACAO_FINAL    <chr> \"Carapebus\", \"Poti\", \"Macabu\", \"Barra de It…\n#> $ GEOLOGIA_MEMBRO_FINAL      <chr> NA, NA, NA, NA, NA, \"Boipeba\", NA, NA, NA, …\n#> $ CDPE                       <chr> \"Existe\", \"Existe\", \"Existe\", \"Existe\", \"Ex…\n#> $ AGP                        <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ PC                         <chr> NA, NA, \"Existe\", NA, NA, NA, NA, NA, NA, N…\n#> $ PAG                        <chr> NA, \"Existe\", \"Existe\", NA, \"Existe\", NA, N…\n#> $ PERFIS_CONVENCIONAIS       <chr> NA, \"Existe\", \"Existe\", \"Existe\", \"Existe\",…\n#> $ DURANTE_PERFURACAO         <chr> NA, NA, \"Existe\", NA, NA, NA, NA, NA, NA, N…\n#> $ PERFIS_DIGITAIS            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ PERFIS_PROCESSADOS         <chr> NA, NA, \"Existe\", \"Existe\", \"Existe\", NA, \"…\n#> $ PERFIS_ESPECIAIS           <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ AMOSTRA_LATERAL            <chr> NA, NA, \"Existe\", NA, NA, NA, NA, NA, NA, N…\n#> $ SISMICA                    <chr> NA, NA, \"Existe\", NA, NA, NA, NA, NA, NA, N…\n#> $ TABELA_TEMPO_PROFUNDIDADE  <chr> NA, NA, \"Existe\", NA, NA, NA, NA, NA, NA, N…\n#> $ DADOS_DIRECIONAIS          <chr> NA, \"Existe\", \"Existe\", \"Existe\", \"Existe\",…\n#> $ TESTE_A_CABO               <chr> NA, \"Existe\", \"Existe\", \"Existe\", NA, NA, \"…\n#> $ TESTE_DE_FORMACAO          <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ CANHONEIO                  <chr> NA, NA, NA, \"Existe\", NA, NA, NA, \"Existe\",…\n#> $ TESTEMUNHO                 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ GEOQUIMICA                 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ SIG_SONDA                  <chr> \"DR-B\", \"GREAT120 (TUS 120)\", \"NS-33\", \"EBS…\n#> $ NOM_SONDA                  <chr> \"DRILLINGRIG-B\", \"GREAT - 120\", \"NORBE IX\",…\n#> $ ATINGIU_PRESAL             <chr> \"I\", \"I\", \"S\", \"I\", \"I\", \"I\", \"I\", \"I\", \"I\"…\n#> $ DHA_ATUALIZACAO            <chr> \"05/11/2023 05:00\", \"05/11/2023 05:00\", \"05…\n```\n\n\n:::\n:::\n\n\n## Criando um filtro de dados ausentes\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn <-  nrow(pocos)\n\n## Calculando razão de valores ausentes\nval_ausentes_df <- pocos %>% \n  summarize(across(everything(), ~ sum(is.na(.)))) %>% \n  pivot_longer(everything(), names_to = \"variavel\", values_to = \"num_val_ausentes\") %>% \n  mutate(razao_val_ausente = num_val_ausentes / n)\n\n## Vendo resultado\nknitr::kable(val_ausentes_df, booktabs = TRUE)\n```\n\n::: {.cell-output-display}\n\n\n|variavel                   | num_val_ausentes| razao_val_ausente|\n|:--------------------------|----------------:|-----------------:|\n|POCO                       |                0|         0.0000000|\n|CADASTRO                   |                0|         0.0000000|\n|OPERADOR                   |             2926|         0.0957273|\n|POCO_OPERADOR              |                0|         0.0000000|\n|ESTADO                     |                0|         0.0000000|\n|BACIA                      |                0|         0.0000000|\n|BLOCO                      |             3792|         0.1240594|\n|SIG_CAMPO                  |             4107|         0.1343650|\n|CAMPO                      |             4107|         0.1343650|\n|TERRA_MAR                  |                0|         0.0000000|\n|POCO_POS_ANP               |                0|         0.0000000|\n|TIPO                       |                0|         0.0000000|\n|CATEGORIA                  |                0|         0.0000000|\n|RECLASSIFICACAO            |             1263|         0.0413204|\n|SITUACAO                   |              108|         0.0035333|\n|INICIO                     |                0|         0.0000000|\n|TERMINO                    |             1860|         0.0608519|\n|CONCLUSAO                  |              146|         0.0047765|\n|TITULARIDADE               |                0|         0.0000000|\n|LATITUDE_BASE_4C           |                0|         0.0000000|\n|LONGITUDE_BASE_4C          |                0|         0.0000000|\n|LATITUDE_BASE_DD           |                0|         0.0000000|\n|LONGITUDE_BASE_DD          |                0|         0.0000000|\n|DATUM_HORIZONTAL           |                0|         0.0000000|\n|TIPO_DE_COORDENADA_DE_BASE |                0|         0.0000000|\n|DIRECAO                    |                0|         0.0000000|\n|PROFUNDIDADE_VERTICAL_M    |            18066|         0.5910489|\n|PROFUNDIDADE_SONDADOR_M    |             1004|         0.0328470|\n|PROFUNDIDADE_MEDIDA_M      |            16550|         0.5414513|\n|REFERENCIA_DE_PROFUNDIDADE |                0|         0.0000000|\n|MESA_ROTATIVA              |                0|         0.0000000|\n|COTA_ALTIMETRICA_M         |            15971|         0.5225087|\n|LAMINA_D_AGUA_M            |            13946|         0.4562586|\n|DATUM_VERTICAL             |            13437|         0.4396061|\n|UNIDADE_ESTRATIGRAFICA     |            30566|         1.0000000|\n|GEOLOGIA_GRUPO_FINAL       |            27388|         0.8960283|\n|GEOLOGIA_FORMACAO_FINAL    |            27127|         0.8874894|\n|GEOLOGIA_MEMBRO_FINAL      |            30362|         0.9933259|\n|CDPE                       |            21320|         0.6975070|\n|AGP                        |            23656|         0.7739318|\n|PC                         |            22122|         0.7237453|\n|PAG                        |            29215|         0.9558006|\n|PERFIS_CONVENCIONAIS       |            21982|         0.7191651|\n|DURANTE_PERFURACAO         |            27530|         0.9006740|\n|PERFIS_DIGITAIS            |             9824|         0.3214029|\n|PERFIS_PROCESSADOS         |            29516|         0.9656481|\n|PERFIS_ESPECIAIS           |            29860|         0.9769024|\n|AMOSTRA_LATERAL            |            29604|         0.9685271|\n|SISMICA                    |            28871|         0.9445462|\n|TABELA_TEMPO_PROFUNDIDADE  |            29676|         0.9708827|\n|DADOS_DIRECIONAIS          |            22650|         0.7410194|\n|TESTE_A_CABO               |            26192|         0.8568998|\n|TESTE_DE_FORMACAO          |            29926|         0.9790617|\n|CANHONEIO                  |            29326|         0.9594320|\n|TESTEMUNHO                 |            30133|         0.9858339|\n|GEOQUIMICA                 |            27420|         0.8970752|\n|SIG_SONDA                  |               86|         0.0028136|\n|NOM_SONDA                  |             4120|         0.1347903|\n|ATINGIU_PRESAL             |            21767|         0.7121311|\n|DHA_ATUALIZACAO            |                0|         0.0000000|\n\n\n:::\n\n```{.r .cell-code}\n## filtro\nval_ausente_filtro <- val_ausentes_df %>% \n  filter(razao_val_ausente <= 0.5) %>% \n  pull(variavel)\n\n# Aplicando o filtro\npoco_filtrado <- pocos %>% \n  select(all_of(val_ausente_filtro))\n```\n:::\n\n\n## Visualizando os dados filtrados\n\n\n::: {.cell}\n\n```{.r .cell-code}\npoco_filtrado %>% \n  glimpse() # estrutura da base de dados filtrada\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> Rows: 30,566\n#> Columns: 35\n#> $ POCO                       <chr> \"7-PRG-59H-RJS\", \"7-GVR-26D-MA\", \"6-BRSA-13…\n#> $ CADASTRO                   <chr> \"74281028968\", \"50090029009\", \"74281028991\"…\n#> $ OPERADOR                   <chr> \"Equinor Brasil\", \"Eneva\", \"Petrobras\", \"Ca…\n#> $ POCO_OPERADOR              <chr> \"BMC7B15\", \"7GVR26DMA\", \"6MLS233RJS\", \"7CP1…\n#> $ ESTADO                     <chr> \"RJ\", \"MA\", \"RJ\", \"SE\", \"MA\", \"BA\", \"SE\", \"…\n#> $ BACIA                      <chr> \"Campos\", \"Parnaíba\", \"Campos\", \"Sergipe\", …\n#> $ BLOCO                      <chr> NA, \"PN-T-68\", NA, NA, \"PN-T-67\", NA, NA, N…\n#> $ SIG_CAMPO                  <chr> \"PRG  \", \"GVR  \", \"MLS  \", \"CP   \", \"GVP  \"…\n#> $ CAMPO                      <chr> \"PEREGRINO\", \"GAVIÃO REAL\", \"MARLIM SUL\", \"…\n#> $ TERRA_MAR                  <chr> \"M\", \"T\", \"M\", \"T\", \"T\", \"T\", \"T\", \"T\", \"T\"…\n#> $ POCO_POS_ANP               <chr> \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", \"S\", \"S\"…\n#> $ TIPO                       <chr> \"7 \", \"7 \", \"6 \", \"7 \", \"7 \", \"7 \", \"7 \", \"…\n#> $ CATEGORIA                  <chr> \"Desenvolvimento\", \"Desenvolvimento\", \"Jazi…\n#> $ RECLASSIFICACAO            <chr> \"INDEFINIDO\", \"ABANDONADO POR OUTRAS RAZÕES…\n#> $ SITUACAO                   <chr> \"ABANDONADO PERMANENTEMENTE\", \"ARRASADO\", \"…\n#> $ INICIO                     <chr> \"24/04/2017 00:00\", \"21/06/2017 00:00\", \"28…\n#> $ TERMINO                    <chr> \"01/05/2017 00:00\", \"05/07/2017 00:00\", \"16…\n#> $ CONCLUSAO                  <chr> \"13/05/2017 00:00\", \"11/07/2017 00:00\", \"30…\n#> $ TITULARIDADE               <chr> \"Público\", \"Público\", \"Público\", \"Público\",…\n#> $ LATITUDE_BASE_4C           <chr> \"-23:17:45,778\", \"-04:51:16,170\", \"-22:30:5…\n#> $ LONGITUDE_BASE_4C          <chr> \"-41:12:28,246\", \"-44:22:32,123\", \"-40:01:0…\n#> $ LATITUDE_BASE_DD           <dbl> -23.296049, -4.854492, -22.515081, -10.6391…\n#> $ LONGITUDE_BASE_DD          <dbl> -41.20785, -44.37559, -40.01919, -36.98067,…\n#> $ DATUM_HORIZONTAL           <chr> \"SIRGAS2000\", \"SIRGAS2000\", \"SIRGAS2000\", \"…\n#> $ TIPO_DE_COORDENADA_DE_BASE <chr> \"Definitiva\", \"Definitiva\", \"Definitiva\", \"…\n#> $ DIRECAO                    <chr> \"Horizontal\", \"Direcional\", \"Vertical\", \"Di…\n#> $ PROFUNDIDADE_SONDADOR_M    <dbl> 760.00, 2210.00, 4600.00, 935.00, 1430.00, …\n#> $ REFERENCIA_DE_PROFUNDIDADE <chr> \"MR\", \"MR\", \"MR\", \"MR\", \"MR\", \"MR\", \"MR\", \"…\n#> $ MESA_ROTATIVA              <dbl> 50.00, 143.00, 32.00, 55.78, 86.00, 109.77,…\n#> $ LAMINA_D_AGUA_M            <dbl> 122, 0, 1107, 0, 0, 0, 0, 0, 0, 0, 0, 0, 12…\n#> $ DATUM_VERTICAL             <chr> \"NM\", \"NM\", \"NM\", \"NM\", \"NM\", \"NM\", \"NM\", \"…\n#> $ PERFIS_DIGITAIS            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n#> $ SIG_SONDA                  <chr> \"DR-B\", \"GREAT120 (TUS 120)\", \"NS-33\", \"EBS…\n#> $ NOM_SONDA                  <chr> \"DRILLINGRIG-B\", \"GREAT - 120\", \"NORBE IX\",…\n#> $ DHA_ATUALIZACAO            <chr> \"05/11/2023 05:00\", \"05/11/2023 05:00\", \"05…\n```\n\n\n:::\n:::\n\n\n## Salvando os dados filtrados\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_csv(poco_filtrado, \"pocos_filtrados.csv\")\n```\n:::\n\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}